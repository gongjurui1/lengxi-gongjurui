(function(d){d.fn.menuAim=function(n){var k=d(this),h=null,i=[],l=null,c=null,e=d.extend({rowSelector:"> li",submenuSelector:"*",tolerance:75,enter:d.noop,exit:d.noop,activate:d.noop,deactivate:d.noop},n),m=function(a){var b=o();b?c=setTimeout(function(){m(a)},b):a!=h&&(h&&e.deactivate(h),e.activate(a),h=a)},o=function(){function a(a,b){return(b.y-a.y)/(b.x-a.x)}if(!h||!d(h).is(e.submenuSelector))return 0;var b=k.offset(),c={x:b.left+k.outerWidth(),y:b.top-e.tolerance},j={x:b.left+k.outerWidth(),
y:b.top+k.outerHeight()+e.tolerance},g=i[i.length-1],f=i[0];if(!g)return 0;f||(f=g);if(f.x<b.left||(f.x>j.x||f.y<b.top||f.y>j.y)||l&&g.x==l.x&&g.y==l.y)return 0;var b=a(g,c),m=a(g,j),c=a(f,c),j=a(f,j);if(b<c&&m>j)return l=g,300;l=null;return 0};k.mouseleave(function(){c&&clearTimeout(c)}).find(e.rowSelector).mouseenter(function(){c&&clearTimeout(c);e.enter(this);m(this)}).mouseleave(function(){e.exit(this)});d(document).mousemove(function(a){i.push({x:a.pageX,y:a.pageY});3<i.length&&i.shift()});return this}})(jQuery);
